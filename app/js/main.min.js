function skip(){$("#blue-screen").addClass("blue-vanish"),$("#intro").addClass("intro-show"),$("#intro-button").addClass("intro-button-show"),$("#hidden-table").addClass("hidden-table-show").show()}function percentageGrow(){return percent>=100?(percent=100,clearInterval(flag),$("#percentage").text(percent),$("#blue-screen").addClass("blue-vanish"),$("#intro").addClass("intro-show"),void $("#intro-button").addClass("intro-button-show")):100>percent?(percent+=Math.floor(1e5*Math.random()%5),percent>100&&(percent=100),void $("#percentage").text(percent)):void 0}function validate(e){return e=$.parseJSON(e),""==e.name?(Materialize.toast("请输入姓名",2e3,"red"),!1):""==e.stu_id||isNaN(e.stu_id)?(Materialize.toast("请输入正确的学号",2e3,"red"),!1):void 0==e.service_type?(Materialize.toast("请选择服务类型",2e3,"red"),!1):void 0==e.date?(Materialize.toast("请选择日期",2e3,"red"),!1):void 0==e.agreement?(Materialize.toast("请同意许可协议",2e3,"red"),!1):!0}$(document).ready(function(){$("select").material_select(),$(".modal").modal()}),$("#hidden-table").hide();var percent=0;$("#do-it-now").click(function(){$("#hidden-table").show(),$("html, body").animate({scrollTop:$("#hidden-table").offset().top},1e3),$("#hidden-table").addClass("hidden-table-show")}),$("#show-agreement").click(function(){$("#agreement-modal").modal("open"),$("#agreement").removeClass("read-first"),$(".tooltipped").tooltip("remove")}),$("#skipAnime").click(function(){skip(),$("html, body").animate({scrollTop:$("#hidden-table").offset().top},1e3)}),$("#agreement").click(function(){return $("#agreement").hasClass("read-first")?(Materialize.toast("请先阅读《免责声明》",2e3),!1):!0}),$("#agree").click(function(){$("#agreement").prop("checked","checked")}),$("#submit").click(function(){return jsonObj=JSON.stringify($("form").serializeObject()),validate(jsonObj)?($.ajax({url:host+"/api/v1/orders",data:jsonObj,method:"POST",async:!0,success:function(e){console.log(e),1==e.success?(e=e.data,$("#spin").removeClass("active"),img=new Image,img.src="data:image/png;base64,"+e.qrcode,$("#result-modal-qrcode").html(img),$("#result-modal-msg").html("此二维码为维修凭证 仅出现一次 请将此二维码截图并保存 或者<a href=order.html?secret="+e.secret_id+">复制此链接 </a>")):($("#spin").removeClass("active"),Materialize.toast(e.msg,5e3,"red"))}}),$("#result-modal").modal("open"),!1):!1});var date="";$("#fri").click(function(){date="fri"}),$("#tue").click(function(){date="tue"}),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e.service_type=$("#service_type").val(),e.date=date,e},flag=setInterval(percentageGrow,50);