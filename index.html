<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>先锋网络中心硬件维修报名</title>
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="css/main.css"  media="screen,projection"/>
    <link href="//cdn.bootcss.com/material-design-icons/3.0.1/iconfont/material-icons.css" rel="stylesheet">
    <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    <script src="js/materialize.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body>
    <div class="blue no-pad-bot no-pad-top">
        <br>
        <br>
        <div class="container blue">
            <br>
            <br>
            <!-- anime-before -->
            <div class="blue-screen container row" id="blue-screen">
                <div>
                <!--div class="big-font align-left col s12 m12 l12 auto-size-font"-->
                    <h1>:(</h1>
                    <h4 class="">
                        你的电脑遇到问题，需要重新启动。<br>
                        我们只收集某些错误信息然后为你重新启动。<br>(完成 <span id="percentage">0</span>%)
                    </h4>
                    <br>
                </div>
            </div>
            <!-- anime-after -->
            <div class="intro container" id="intro">
                <div class="row">
                    <h2 class="no-pad no-margin center">先锋网络中心 硬件维修报名</h2>
                    <br>
                    <h4 class="no-pad no-margin center">NEUPioneer Computer Maintainence</h4>
                </div>
                <div class="row">
                    <h5 class="center truncate">先锋网络中心硬件维修服务开始于2004年</h5>
                    <br>
                    <div class="row center intro-button" id="intro-button">
                        <a class="btn light-blue">了解更多</a>
                        <a class="btn orange" id="do-it-now">立即报名</a>
                    </div>
                </div>
            </div>
            <br>
            <br>
        </div>
        <br>
        <br>
    </div>
    <div class="section light-green no-pad-bot no-pad-top hidden-table" id="hidden-table">
        <div class="container no-pad no-margin">
            <div class="row light-green center auto-size-font">
                <div class="triangle"></div>
                <h1 class="col s2 m2 l2 white-text big-font">;)</h1>
                <h4 class="col white-text big-font text-center">填写表格进行报名哦</h4>
            </div>
            <div class="row white-text">
                <form class="col s12 m12 l12" method="POST">
                    <div class="row">
                        <div class="input-field col s12 m12 l12">
                            <i class="material-icons prefix">account_circle</i>
                            <input placeholder="请输入姓名 如 夏娜" id="name" type="text" class="validate" name="name" required>
                        </div>
                        <div class="input-field col s12 m12 l12">
                            <i class="material-icons prefix">credit_card</i>
                            <input placeholder="请输入学号" id="stu_id" type="text" class="validate" name="stu_id" required>
                        </div>
                        <div class="input-field col s6 m6 l6">
                            <i class="material-icons prefix">settings</i>
                            <select id="service_type" required>
                                <option value="none" disabled selected>请选择服务类型</option>
                                <option value="os_inst"系统</option>
                                <option value="software_inst">软件安装</option>
                                <option value="hardware_fix">配件更换</option>
                                <option value="cleanup">清灰</option>
                                <option value="data_recover">数据恢复</option>
                                <option value="others">其他</option>
                            </select>
                        </div>
                        <div class="input-field col s3 m3 l3">请选择预约日期(仅限本周)</div>
                        <div class="input-field col s3 m3 l3">
                            <div class="switch">
                                <label class="white-text">
                                    周二
                                    <input type="checkbox">
                                    <span class="lever"></span>
                                    周五
                                </label>
                            </div>
                        </div>
                        <div class="input-field col s12 m12 l12">
                            <i class="material-icons prefix">mode_edit</i>
                            <textarea name="comment" placeholder="请用一句话描述你的需求，如果需要补充说明,也请写在这里" class="materialize-textarea" id="comment" required></textarea>
                            <label for="comment" class="white-text"></label>
                        </div>
                        <div class="row">
                            <div class="col">
                                <button class="btn blue waves-effect btn-large" id="submit">现在报名</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <footer class="page-footer light-green">
            <div class="container">
            </div>
            <div class="footer-copyright no-margin no-pad">
                <div class="container">
                    <div class="row">
                        <div class="col s7 m7 l7 truncate">先锋网络中心对此活动持有最终解释权</div>
                        <div class="col s5 m5 l5 right-align">By <a href="http://blog.neupioneer.com:8111">NEUP-Net-Depart</a></div>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <div class="modal" id="result-modal">
        <div class="modal-content">
            <h3>申请状态</h3>
            <!-- Add a spinner -->
            <div class="preloader-wrapper big center active" id="spin">
                <div class="spinner-layer spinner-blue spinner-blue-only">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
            <div id="result-modal-body">

            </div>
        </div>
    </div>
    <script>
        function debug() {
           // Disable all anime
            $("#blue-screen").addClass("blue-vanish");
            $("#intro").addClass("intro-show");
            $("#intro-button").addClass("intro-button-show");
            $("#hidden-table").addClass("hidden-table-show").show();
        }
        $(document).ready(function() {
            $('select').material_select();
            //$('#comment').trigger();
            $('.modal').modal();
        });
        $("#hidden-table").hide();
        //debug();
        var percent = 0;
        function percentageGrow() {
            if(percent >= 100) {
                percent = 100;
                clearInterval(flag);
                $("#percentage").text(percent);
                $("#blue-screen").addClass("blue-vanish");
                $("#intro").addClass("intro-show");
                $("#intro-button").addClass("intro-button-show");
                return;
            }
            if(percent < 100) {
                percent = percent + Math.floor(Math.random() * 100000 % 5);
                $("#percentage").text(percent);
                return;
            }
        }

        $("#do-it-now").click(function () {
            $("#hidden-table").show();
            $("html, body").animate({
                scrollTop: $("#hidden-table").offset().top
            }, 2000);
            $("#hidden-table").addClass("hidden-table-show");
        });

        $("#submit").click(function() {
            jsonObj = JSON.stringify($('form').serializeObject());
            console.log(jsonObj);
            for(var k = 0; k < 100000000; k++) {
            }
            $.ajax({
                url: ".",
                data: jsonObj,
                method: "POST",
                async: true,
                success: function (resp) {
                    resp = "申请成功~ 您的邀请码为: 0b4baeed4ba36c95f6f25cbf57048d91";
                    $("#spin").removeClass("active");
                    $("#result-modal-body").text(resp);
                }
            });
            $("#result-modal").modal("open");
            return false;
            // Active Modal
        });

        /* Use for convert form to JSON */
        $.fn.serializeObject = function()
        {
            var o = {};
            var a = this.serializeArray();
            $.each(a, function() {
                if (o[this.name] !== undefined) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                }
            });
            /* Add Service Type */
            o['service_type'] = $("#service_type").val();
            o['date'] = $("#date").val();
            return o;
        };
        flag = setInterval(percentageGrow, 50)
    </script>
</body>
</html>